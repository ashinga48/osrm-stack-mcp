version: '3.8'

services:
  osrm-backend:
    image: ghcr.io/project-osrm/osrm-backend:latest
    container_name: osrm-backend
    ports:
      - "${BACKEND_PORT:-5000}:5000"
    volumes:
      - ../_data:/data
    command: osrm-routed --algorithm ${ALGORITHM:-mld} /data/${OSM_FILE:-berlin}.osrm
    restart: unless-stopped
    networks:
      - osrm-network

  osrm-frontend:
    image: osrm/osrm-frontend:latest
    container_name: osrm-frontend
    ports:
      - "${FRONTEND_PORT:-9966}:9966"
    environment:
      - OSRM_SERVER_URL=${OSRM_SERVER_URL:-http://osrm-backend:5000}
    depends_on:
      - osrm-backend
    restart: unless-stopped
    networks:
      - osrm-network

networks:
  osrm-network:
    driver: bridge

